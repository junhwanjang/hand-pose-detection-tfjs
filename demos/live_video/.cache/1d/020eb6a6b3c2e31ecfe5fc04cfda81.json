{"id":"node_modules/@tensorflow-models/hand-pose-detection/shared/calculators/association_norm_rect.js","dependencies":[{"name":"/Users/junhwanjang/Documents/GitHub/tfjs-models/hand-pose-detection/demos/live_video/node_modules/@tensorflow-models/hand-pose-detection/shared/calculators/association_norm_rect.js.map","includedInParent":true,"mtime":1659488981778},{"name":"/Users/junhwanjang/Documents/GitHub/tfjs-models/hand-pose-detection/demos/live_video/package.json","includedInParent":true,"mtime":1659488584354},{"name":"/Users/junhwanjang/Documents/GitHub/tfjs-models/hand-pose-detection/demos/live_video/.babelrc","includedInParent":true,"mtime":1659488584354}],"generated":{"js":"\"use strict\";\n/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.calculateAssociationNormRect = exports.getBoundingBox = void 0;\nfunction area(rect) {\n    return rect.width * rect.height;\n}\nfunction intersects(rect1, rect2) {\n    return !(rect1.xMax < rect2.xMin || rect2.xMax < rect1.xMin ||\n        rect1.yMax < rect2.yMin || rect2.yMax < rect1.yMin);\n}\nfunction intersect(rect1, rect2) {\n    var xMin = Math.max(rect1.xMin, rect2.xMin);\n    var xMax = Math.min(rect1.xMax, rect2.xMax);\n    var yMin = Math.max(rect1.yMin, rect2.yMin);\n    var yMax = Math.min(rect1.yMax, rect2.yMax);\n    var width = Math.max(xMax - xMin, 0);\n    var height = Math.max(yMax - yMin, 0);\n    return { xMin: xMin, xMax: xMax, yMin: yMin, yMax: yMax, width: width, height: height };\n}\nfunction getBoundingBox(rect) {\n    var xMin = rect.xCenter - rect.width / 2;\n    var xMax = xMin + rect.width;\n    var yMin = rect.yCenter - rect.height / 2;\n    var yMax = yMin + rect.height;\n    return { xMin: xMin, xMax: xMax, yMin: yMin, yMax: yMax, width: rect.width, height: rect.height };\n}\nexports.getBoundingBox = getBoundingBox;\nfunction overlapSimilarity(rect1, rect2) {\n    var bbox1 = getBoundingBox(rect1);\n    var bbox2 = getBoundingBox(rect2);\n    if (!intersects(bbox1, bbox2)) {\n        return 0;\n    }\n    var intersectionArea = area(intersect(bbox1, bbox2));\n    var normalization = area(bbox1) + area(bbox2) - intersectionArea;\n    return normalization > 0 ? intersectionArea / normalization : 0;\n}\n// ref:\n// https://github.com/google/mediapipe/blob/master/mediapipe/calculators/util/association_norm_rect_calculator.cc\n// Propgating ids from previous to current is not performed by this code.\nfunction calculateAssociationNormRect(rectsArray, minSimilarityThreshold) {\n    var result = [];\n    // rectsArray elements are interpreted to be sorted in reverse priority order,\n    // so later elements are higher in priority. This means that if there's a\n    // large overlap, the later rect will be added and the older rect will be\n    // removed.\n    rectsArray.forEach(function (rects) { return rects.forEach(function (curRect) {\n        result = result.filter(function (prevRect) {\n            return overlapSimilarity(curRect, prevRect) <= minSimilarityThreshold;\n        });\n        result.push(curRect);\n    }); });\n    return result;\n}\nexports.calculateAssociationNormRect = calculateAssociationNormRect;\n"},"sourceMaps":{"js":{"version":3,"file":"association_norm_rect.js","sourceRoot":"","sources":["../../../src/shared/calculators/association_norm_rect.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"635cf1aa2f2e1c5fe4d12b49c7ace970","cacheData":{"env":{}}}