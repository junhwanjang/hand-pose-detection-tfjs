{"id":"node_modules/@tensorflow-models/hand-pose-detection/tfjs/calculators/hand_landmarks_to_rect.js","dependencies":[{"name":"/Users/junhwanjang/Documents/GitHub/tfjs-models/hand-pose-detection/demos/live_video/node_modules/@tensorflow-models/hand-pose-detection/tfjs/calculators/hand_landmarks_to_rect.js.map","includedInParent":true,"mtime":1659488981843},{"name":"/Users/junhwanjang/Documents/GitHub/tfjs-models/hand-pose-detection/demos/live_video/package.json","includedInParent":true,"mtime":1659488584354},{"name":"/Users/junhwanjang/Documents/GitHub/tfjs-models/hand-pose-detection/demos/live_video/.babelrc","includedInParent":true,"mtime":1659488584354},{"name":"../../shared/calculators/image_utils","loc":{"line":20,"column":28},"parent":"/Users/junhwanjang/Documents/GitHub/tfjs-models/hand-pose-detection/demos/live_video/node_modules/@tensorflow-models/hand-pose-detection/tfjs/calculators/hand_landmarks_to_rect.js","resolved":"/Users/junhwanjang/Documents/GitHub/tfjs-models/hand-pose-detection/demos/live_video/node_modules/@tensorflow-models/hand-pose-detection/shared/calculators/image_utils.js"}],"generated":{"js":"\"use strict\";\n/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.handLandmarksToRect = void 0;\nvar image_utils_1 = require(\"../../shared/calculators/image_utils\");\nvar WRIST_JOINT = 0;\nvar MIDDLE_FINGER_PIP_JOINT = 6;\nvar INDEX_FINGER_PIP_JOINT = 4;\nvar RING_FINGER_PIP_JOINT = 8;\nfunction computeRotation(landmarks, imageSize) {\n    var x0 = landmarks[WRIST_JOINT].x * imageSize.width;\n    var y0 = landmarks[WRIST_JOINT].y * imageSize.height;\n    var x1 = (landmarks[INDEX_FINGER_PIP_JOINT].x +\n        landmarks[RING_FINGER_PIP_JOINT].x) /\n        2;\n    var y1 = (landmarks[INDEX_FINGER_PIP_JOINT].y +\n        landmarks[RING_FINGER_PIP_JOINT].y) /\n        2;\n    x1 = (x1 + landmarks[MIDDLE_FINGER_PIP_JOINT].x) / 2 * imageSize.width;\n    y1 = (y1 + landmarks[MIDDLE_FINGER_PIP_JOINT].y) / 2 * imageSize.height;\n    var rotation = image_utils_1.normalizeRadians(Math.PI / 2 - Math.atan2(-(y1 - y0), x1 - x0));\n    return rotation;\n}\n/**\n * @param landmarks List of normalized landmarks.\n *\n * @returns A `Rect`.\n */\n// ref:\n// https://github.com/google/mediapipe/blob/master/mediapipe/hand_landmark/calculators/hand_landmarks_to_rect_calculator.cc;bpv=1\nfunction handLandmarksToRect(landmarks, imageSize) {\n    var rotation = computeRotation(landmarks, imageSize);\n    var reverseAngle = image_utils_1.normalizeRadians(-rotation);\n    var minX = Number.POSITIVE_INFINITY, maxX = Number.NEGATIVE_INFINITY, minY = Number.POSITIVE_INFINITY, maxY = Number.NEGATIVE_INFINITY;\n    // Find boundaries of landmarks.\n    for (var _i = 0, landmarks_1 = landmarks; _i < landmarks_1.length; _i++) {\n        var landmark = landmarks_1[_i];\n        var x = landmark.x;\n        var y = landmark.y;\n        minX = Math.min(minX, x);\n        maxX = Math.max(maxX, x);\n        minY = Math.min(minY, y);\n        maxY = Math.max(maxY, y);\n    }\n    var axisAlignedcenterX = (maxX + minX) / 2;\n    var axisAlignedcenterY = (maxY + minY) / 2;\n    minX = Number.POSITIVE_INFINITY, maxX = Number.NEGATIVE_INFINITY,\n        minY = Number.POSITIVE_INFINITY, maxY = Number.NEGATIVE_INFINITY;\n    // Find boundaries of rotated landmarks.\n    for (var _a = 0, landmarks_2 = landmarks; _a < landmarks_2.length; _a++) {\n        var landmark = landmarks_2[_a];\n        var originalX = (landmark.x - axisAlignedcenterX) * imageSize.width;\n        var originalY = (landmark.y - axisAlignedcenterY) * imageSize.height;\n        var projectedX = originalX * Math.cos(reverseAngle) - originalY * Math.sin(reverseAngle);\n        var projectedY = originalX * Math.sin(reverseAngle) + originalY * Math.cos(reverseAngle);\n        minX = Math.min(minX, projectedX);\n        maxX = Math.max(maxX, projectedX);\n        minY = Math.min(minY, projectedY);\n        maxY = Math.max(maxY, projectedY);\n    }\n    var projectedCenterX = (maxX + minX) / 2;\n    var projectedCenterY = (maxY + minY) / 2;\n    var centerX = projectedCenterX * Math.cos(rotation) -\n        projectedCenterY * Math.sin(rotation) +\n        imageSize.width * axisAlignedcenterX;\n    var centerY = projectedCenterX * Math.sin(rotation) +\n        projectedCenterY * Math.cos(rotation) +\n        imageSize.height * axisAlignedcenterY;\n    var width = (maxX - minX) / imageSize.width;\n    var height = (maxY - minY) / imageSize.height;\n    return {\n        xCenter: centerX / imageSize.width,\n        yCenter: centerY / imageSize.height,\n        width: width,\n        height: height,\n        rotation: rotation\n    };\n}\nexports.handLandmarksToRect = handLandmarksToRect;\n"},"sourceMaps":{"js":{"version":3,"file":"hand_landmarks_to_rect.js","sourceRoot":"","sources":["../../../src/tfjs/calculators/hand_landmarks_to_rect.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"fdbc59f4bd9a3f5e11a897d6a2a80b11","cacheData":{"env":{}}}